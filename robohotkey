#!/usr/bin/env python3

import subprocess
import atexit
import time
import sys
import base64
import io
import collections
import pystray
import PIL.Image

state = False

def help_message():
    print("robohotkey: missing hotkey file")
    print("Usage: robohotkey hotkey_file.rbk")
    sys.exit()

if len(sys.argv) < 2:
    help_message()

filepath = sys.argv[1]

if filepath in ["-h", "--help", "-help", "--h"]:
    help_message()

file_lines = list(map(str.strip, open(filepath, "r", encoding="UTF-8").readlines()))

hotkeys = []
hotkey = collections.namedtuple('hotkey', ['input_key', 'output_key'])
for file_line in file_lines:
    hotkey_line = file_line.split("->")
    if file_line.strip().startswith("//") or len(hotkey_line) < 2:
        continue
    hotkeys.append(hotkey(input_key = hotkey_line[0].strip(), output_key = hotkey_line[1].strip()))

def hotkeys_enabled():
    global state, hotkeys
    if state == True:
        subprocess.run("setxkbmap", shell = True)
    else:
        for hotkey in hotkeys:
            subprocess.run("xmodmap -e 'keysym " + hotkey.input_key + " = " + hotkey.output_key + "'", shell = True)
    state = not state

hotkeys_enabled()

atexit.register(hotkeys_enabled)

def icon_image():
    return PIL.Image.open(io.BytesIO(base64.b64decode("iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA0GVYSWZJSSoACAAAAAoAAAEEAAEAAABAAAAAAQEEAAEAAABAAAAAAgEDAAMAAACGAAAAEgEDAAEAAAABAAAAGgEFAAEAAACMAAAAGwEFAAEAAACUAAAAKAEDAAEAAAACAAAAMQECAA0AAACcAAAAMgECABQAAACqAAAAaYcEAAEAAAC+AAAAAAAAAAgACAAIAEgAAAABAAAASAAAAAEAAABHSU1QIDIuOTkuMTkAADIwMjQ6MDU6MjIgMTY6NDE6NTcAAQABoAMAAQAAAAEAAAAAAAAA49Tu3gAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKg4GkeKQoYqDXVTEsVahCBVCrdCqg/noFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNnBSdFFSvxfUmgR48FxP97de9y9A7hmVdGsngSg6baZSSWFXH5VCL8ihCHwGEdUUixjThTT8B1f9wiw9S7OsvzP/Tn61YKlAAGBOKEYpk28QTyzaRuM94l5pSypxOfEEyZdkPiR6bLHb4xLLnMskzezmXlinlgodbHcxUrZ1IiniWOqplM+l/NYZbzFWKvWlfY92QsjBX1lmek0R5DCIpYgQoCMOiqowkacVp0UCxnaT/r4o65fJJdMrgoUciygBg2S6wf7g9/dWsWpSS8pkgRCL47zMQqEd4FWw3G+jx2ndQIEn4ErveOvNYHZT9IbHS12BAxsAxfXHU3eAy53gOEnQzIlVwrS5IpF4P2MvikPDN4CfWteb+19nD4AWeoqfQMcHAJjJcpe93l3b3dv/55p9/cDuCRywlaGNRQAAA12aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjVhOGY0NWEzLTFkNmItNDBjMi1hNjkxLWM3YWZkODVlNDA2YyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmNGNmYjIzYS01YmM0LTQxMmQtODdlOC0zMmJjM2YyNTY3MmEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjNTk2ODkxNy01NDhhLTQ3YzgtOGZmZi1lMjMyNzM1OTY2YWIiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMy4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MTY0MTA1MTk4MjkzNDQiCiAgIEdJTVA6VmVyc2lvbj0iMi45OS4xOSIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIyVDE2OjQxOjU3LTA0OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyMlQxNjo0MTo1Ny0wNDowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NjZjN2FkLWY0YTctNDZkMy1iZjhmLWY2ZTdkMTdkNmIyMCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR0lNUCAyLjk5LjE5IChMaW51eCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDUtMjJUMTY6NDE6NTktMDQ6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+gEmkJwAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+gFFhQpO2UzyR8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAeLklEQVR42tWbd5Qc1bXuf+ecCp2me3py0ozSKCIURjIooUAwGORLMmBjHiYYP4OxMWDjdLHA4Iz9jBOO2AIWmGQwJgkBtgkGBAKUQRppFEaT83SuqvP+qJ6WRhK24Gnd5Vdr1eqZru6qs7+z97f3/s5pwQGH1roauBaQgAMowAbiQAAQB3z8DeC7QgiP/48PcRAAq3UmfbLX2wtaj7zpv3geuA54HsIOoGpqQYirgN8DY4DKg+7dBrQIIdz/ZACMg/6fkn3lZdK3Xvevv6U9ih74G7I4fjzwJWDse3zyYa31rw/zfocQ4q3/RADKdTp9ZN+UEuBCXFcmfncHurMdPdjnu1WsBONDCwicfOrZwNkFbyr4ncglEokLFteP3wLCEoIg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")))

def exit_program():
    sys.exit()

menu = pystray.Menu(pystray.MenuItem("Hotkeys Enabled", hotkeys_enabled, checked = lambda item: state), pystray.MenuItem("Exit", exit_program))
icon = pystray.Icon('Robohotkey', icon = icon_image(), menu = menu).run()
